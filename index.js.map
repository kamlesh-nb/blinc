{"version":3,"sources":["webpack://blinc/webpack/universalModuleDefinition","webpack://blinc/webpack/bootstrap","webpack://blinc/./src/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","renderElement","vNode","document","createTextNode","toString","$el","isSvg","createElementNS","tag","createElement","elem","attrs","addEventListener","slice","textContent","node","setAttribute","kid","children","$child","appendChild","diff","parent","index","vOldNode","vNewNode","patches","undefined","nodes","push","$node","childNodes","replaceWith","$parent","parentNode","$newNode","replaceChild","assign","oNode","nNode","set","attribs","removeEventListener","remove","removeAttribute","k","diffAttribs","xLen","keys","length","yLen","len","patch","kids","removeChild","diffKids","runEffects","effects","dispatch","forEach","effect","Element","props","vOldDom","$viewNode","oState","init","onMount","reducer","render","subscriptions","subs","unsubs","applyState","nState","vNewDom","diffAndPatch","msg","commands","mount","subscription","subscribe","unsubscribe","unMount","unSub","Push","path","history","pushState","Routes","Router","state","routes","rootRef","currElem","func","retVal","apply","this","arguments","dispatchEvent","Event","event","location","pathname","route","filter","requestPath","paramNames","regexPath","replace","full","colon","params","routeMatch","match","RegExp","reduce","Error","element","target","readyState","ref","App","body"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"blinc\"] = factory();\n\telse\n\t\troot[\"blinc\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","const renderElement = (vNode) => {\n  if (typeof vNode === \"string\") {\n    return document.createTextNode(vNode.toString());\n  }\n  const $el = vNode.isSvg\n    ? document.createElementNS(\"http://www.w3.org/2000/svg\", vNode.tag)\n    : document.createElement(vNode.tag);\n  vNode.elem = $el;\n  for (var key in vNode.attrs) {\n    if (typeof vNode.attrs[key] === \"function\") {\n      $el.addEventListener(key.slice(2), vNode.attrs[key], true);\n    } else {\n      if (key === \"text\") {\n        $el.textContent = vNode.attrs[key];\n      } else if (key === \"ref\") {\n        vNode.attrs[key].node = $el;\n      } else {\n        $el.setAttribute(key, vNode.attrs[key]);\n      }\n    }\n  }\n\n  for (var kid in vNode.children) {\n    if (typeof vNode.children[kid] !== \"string\") {\n      vNode.children[kid].key = kid;\n    }\n    var $child = renderElement(vNode.children[kid]);\n    $el.appendChild($child);\n  }\n\n  return $el;\n};\n\nconst diffAttribs = (oNode, nNode, patches) => {\n\n  const set = (key) => {\n    patches.attribs.push(() => {\n      if (typeof nNode.attrs[key] !== \"function\") {\n        if (key === \"text\") {\n          oNode.elem.textContent = nNode.attrs[key];\n        } else if (key === \"ref\") {\n          nNode.attrs[key].node = oNode.elem;\n        } else {\n          oNode.elem.setAttribute(key, nNode.attrs[key]);\n        }\n      } else {\n        oNode.elem.removeEventListener(key.slice(2), oNode.attrs[key], true);\n        oNode.elem.addEventListener(key.slice(2), nNode.attrs[key], true);\n      }\n      oNode.attrs[key] = nNode.attrs[key];\n    });\n  };\n \n  const remove = (key) => {\n    if (!(key in nNode.attrs)) {\n      patches.attribs.push(() => {\n        oNode.elem.removeAttribute(key);\n        delete oNode.attrs[key];\n      });\n    }\n  };\n\n  for (const key in nNode.attrs) {\n    if (\n      oNode.attrs[key] === undefined ||\n      oNode.attrs[key] !== nNode.attrs[key]\n    ) {\n      set(key);\n    }\n  }\n  for (const k in oNode.attrs) {\n    remove(k);\n  }\n};\n\nconst diffKids = (oNode, nNode, patches) => {\n  const xLen = Object.keys(oNode.children).length;\n  const yLen = Object.keys(nNode.children).length;\n  const len = xLen > yLen ? xLen : yLen;\n\n  const patch = (i) => {\n    if (oNode.children[i] === undefined) {\n      patches.kids.push(() => {\n        const $el = renderElement(nNode.children[i]);\n        nNode.children[i].elem = $el;\n        oNode.children[i] = {};\n        Object.assign(oNode.children[i], nNode.children[i]);\n        oNode.elem.appendChild($el);\n      });\n    } else if (nNode.children[i] === undefined) {\n      patches.kids.push(() => {\n        oNode.elem.removeChild(oNode.children[i].elem);\n        delete oNode.children[i];\n      });\n    } else {\n      diff(oNode, i, oNode.children[i], nNode.children[i], patches);\n    }\n  };\n\n  for (let i = 0; i < len; i++) {\n    patch(i);\n  }\n};\n\nconst diff = (parent, index, vOldNode, vNewNode, patches) => {\n  if (vOldNode !== null && vNewNode === undefined) {\n  } else if (typeof vOldNode === \"string\" || typeof vNewNode === \"string\") {\n    if (vOldNode !== vNewNode) {\n      patches.nodes.push(() => {\n        const $node = renderElement(vNewNode);\n        parent.elem.childNodes[index].replaceWith($node);\n        parent.children[index] = vNewNode;\n      });\n    }\n    return;\n  } else if (vOldNode.tag !== vNewNode.tag) {\n    patches.nodes.push(() => {\n      const $parent = vOldNode.elem.parentNode;\n      const $newNode = renderElement(vNewNode);\n      $parent.replaceChild($newNode, vOldNode.elem);\n      Object.assign(vOldNode, vNewNode);\n      vOldNode.elem = $newNode;\n    });\n  }\n\n  diffAttribs(vOldNode, vNewNode, patches);\n  diffKids(vOldNode, vNewNode, patches);\n};\n\nconst diffAndPatch = (vOldNode, vNewNode) => {\n  const patches = { nodes: [], kids: [], attribs: [] };\n  diff({}, 0, vOldNode, vNewNode, patches);\n  patches.nodes.forEach((patch) => {\n    patch();\n  });\n  patches.attribs.forEach((patch) => {\n    patch();\n  });\n  patches.kids.forEach((patch) => {\n    patch();\n  });\n};\n\nconst runEffects = (effects, dispatch) => {\n  effects.forEach((effect) => {\n    if (effect[1]) {\n      effect[0](effect[1], dispatch);\n    } else {\n      effect[0](dispatch);\n    }\n  });\n};\n\nconst Element = (props = {}) => {\n  let vOldDom, $viewNode;\n  let oState = props.init ? props.init[0] : null;\n  let onMount = props.init ? props.init[1] : null;\n  const reducer = props.reducer;\n  const render = props.render;\n  const subscriptions = props.subscriptions ? props.subscriptions : null;\n  let subs = [],\n    unsubs = [];\n\n  const applyState = (nState) => {\n    var vNewDom = render(nState, dispatch);\n    diffAndPatch(vOldDom, vNewDom);\n    Object.assign(oState, nState);\n  };\n\n  const dispatch = (msg) => {\n    const nState = reducer(msg, oState);\n    const commands = nState[1];\n    if (commands) {\n      runEffects(commands, dispatch);\n    }\n    applyState(nState[0]);\n  };\n\n  const mount = ($node) => {\n    vOldDom = oState ? render(oState, dispatch) : render();\n    $viewNode = renderElement(vOldDom);\n    if ($node.childNodes.length > 0) {\n      $node.replaceChild($viewNode, $node.childNodes[0]);\n    } else {\n      $node.appendChild($viewNode);\n    }\n    if (onMount) {\n      runEffects(onMount, dispatch);\n    }\n    if (subscriptions) {\n      subscriptions.forEach((subscription) => {\n        subs.push([subscription.subscribe]);\n        unsubs.push(subscription.unsubscribe);\n      });\n      runEffects(subs, dispatch);\n    }\n  };\n\n  const unMount = () => {\n    unsubs.forEach((unSub) => {\n      unSub();\n    });\n  };\n\n  return { mount, unMount };\n};\n\nconst Push = (path) => {\n  history.pushState({ path: path }, \"\", path);\n};\n\nconst Routes = (props = {}) => {\n  return props;\n};\n\nconst Router = (state, dispatch, props = {}) => {\n  let rootRef = { node: null }, routes, currElem = null;\n  history.pushState = ((func) =>\n    function pushState() {\n      var retVal = func.apply(this, arguments);\n      window.dispatchEvent(new Event(\"pushstate\"));\n      return retVal;\n    })(history.pushState);\n\n  window.addEventListener(\"popstate\", (event) => {\n    mount(rootRef.node, window.location.pathname);\n  });\n\n  window.addEventListener(\"pushstate\", (event) => {\n    mount(rootRef.node, window.location.pathname);\n  });\n\n  const match = (route, requestPath) => {\n    const paramNames = [];\n    const regexPath =\n      route.path.replace(/([:*])(\\w+)/g, (full, colon, name) => {\n        paramNames.push(name);\n        return \"([^/]+)\";\n      }) + \"(?:/|$)\";\n\n    let params = {};\n\n    const routeMatch = requestPath.match(new RegExp(regexPath));\n    if (routeMatch !== null) {\n      params = routeMatch\n        .slice(1, routeMatch.length)\n        .reduce((params, value, index) => {\n          if (params === null) params = {};\n          params[paramNames[index]] = value;\n          return params;\n        }, null);\n    }\n    route[\"params\"] = params;\n    return routeMatch;\n  };\n\n  const mount = ($node, path) => {\n    const route = routes.filter((route) => match(route, path))[0];\n    if (!route) { throw new Error(`Route for path, ${ path } not defined...`);}\n    if (currElem) { currElem.unMount(); }\n    let props = { state, dispatch, params: route.params };\n    currElem = Element(route.element(props));\n    currElem.mount($node);\n  };\n\n  document.addEventListener(\"readystatechange\", (event) => {\n    if (event.target.readyState === \"complete\") {\n      mount(rootRef.node, '/');\n    }\n  });\n\n  if (props) {\n    props.attrs.ref = rootRef;\n    routes = props.children[0];\n    props.children = {};\n  }\n  return props;\n};\n\nconst App = (props = {}) => {\n  let e = Element(props);\n  e.mount(document.body);\n};\n\nexport { App, Element, Push, Router, Routes };\n"],"sourceRoot":""}