{"version":3,"sources":["../src/index.js"],"names":["Router","listener","config","routes","mode","activeClass","links","window","onpopstate","event","routeTo","state","path","onhashchange","match","route","requestPath","paramNames","regexPath","replace","full","colon","name","console","log","push","params","routeMatch","RegExp","slice","length","reduce","value","index","filter","history","pushState","navigate","e","target","attributes","forEach","key","element","classList","remove","add","init","document","querySelectorAll","link","addEventListener","isActive","onRouteChange","func","renderElement","vNode","createTextNode","$el","createElement","tag","Object","entries","attrs","k","v","toLowerCase","textContent","setAttribute","children","kid","$child","appendChild","diffAttribs","oNode","nNode","patches","elem","removeEventListener","removeAttribute","diffKids","xLen","keys","yLen","len","i","assign","removeChild","diff","parent","vOldNode","vNewNode","$text","childNodes","replaceWith","$parent","parentNode","$newNode","replaceChild","error","diffAndPatch","nodes","kids","attribs","patch","View","vOldDom","$viewNode","props","update","view","oState","effect","applyState","nState","vNewDom","dispatch","msg","cmd","mount","$node","App","reducer","navbar","footer","main","router","_initHeader","$header","body","_initMain","$main","_initFooter","$footer","run"],"mappings":"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","sourcesContent":["\n\nconst Router = (config = {}) => {\n    let routes = config.routes;\n    let mode = config.mode || null;\n    let activeClass = config.activeClass || null;\n    let links = [];\n    let listener;\n  \n    if (mode === \"history\") {\n      window.onpopstate = (event) => {\n        routeTo(event.state.path);\n      };\n    } else {\n      window.onhashchange = (event) => {\n        routeTo();\n      };\n    }\n  \n    const match = (route, requestPath) => {\n      let paramNames = [];\n      let regexPath =\n        route.path.replace(/([:*])(\\w+)/g, (full, colon, name) => {\n          console.log(`full: ${full}, color: ${colon}`);\n          paramNames.push(name);\n          return \"([^/]+)\";\n        }) + \"(?:/|$)\";\n  \n      let params = {};\n  \n      let routeMatch = requestPath.match(new RegExp(regexPath));\n      if (routeMatch !== null) {\n        params = routeMatch\n          .slice(1, routeMatch.length)\n          .reduce((params, value, index) => {\n            if (params === null) params = {};\n            params[paramNames[index]] = value;\n            return params;\n          }, null);\n      }\n      route[\"params\"] = params;\n      return routeMatch;\n    };\n  \n    const routeTo = (path) => {\n      const route = routes.filter((route) => match(route, path))[0];\n      if (mode === \"history\") {\n        window.history.pushState({ path: path }, \"name\", route.path);\n      } else {\n      }\n      listener(route);\n    };\n  \n    const navigate = (e) => {\n      var path = e.target.attributes[\"path\"].value;\n      if (activeClass !== null) {\n        links.forEach((key) => {\n          key.element.classList.remove(activeClass);\n        });\n      }\n      e.target.classList.add(activeClass);\n      routeTo(path);\n    };\n  \n    const init = () => {\n      document.querySelectorAll(\"[path]\").forEach((link) => {\n        link.addEventListener(\"click\", navigate, false);\n        links.push({\n          path: link.attributes[\"path\"],\n          isActive: false,\n          element: link,\n        });\n      });\n    };\n  \n    const onRouteChange = (func) => {\n      listener = func;\n    };\n  \n    return { init, onRouteChange, routeTo };\n  };\n  \n  const renderElement = (vNode) => {\n    if (typeof vNode === \"string\") {\n      return document.createTextNode(vNode);\n    }\n  \n    const $el = document.createElement(vNode.tag);\n    vNode[\"elem\"] = $el;\n  \n    for (const [k, v] of Object.entries(vNode.attrs)) {\n      if (typeof v === \"function\") {\n        $el.addEventListener(k.slice(2).toLowerCase(), v);\n      } else {\n        if (k === \"text\") {\n          $el.textContent = v;\n        } else {\n          $el.setAttribute(k, v);\n        }\n      }\n    }\n  \n    for( const [k, kid] of Object.entries(vNode.children)){\n      var $child = renderElement(kid);\n      $el.appendChild($child);\n    }\n    return $el;\n  };\n  \n  const diffAttribs = (oNode, nNode, patches) => {\n      for (const [k, v] of Object.entries(nNode.attrs)) {\n        if (oNode.attrs[k] == undefined || oNode.attrs[k] !== v) {\n          patches['attribs'].push(()=>{\n            if (typeof v !== \"function\") {\n              if (k === \"text\") {\n                oNode.elem.textContent = v;\n              } else {\n                oNode.elem.setAttribute(k, v);\n              }\n            } else {\n              oNode.elem.removeEventListener(k.slice(2).toLowerCase(), oNode.attrs[k])\n              oNode.elem.addEventListener(k.slice(2).toLowerCase(), v);\n            }\n            oNode.attrs[k] = v;\n          })\n        }\n      }\n    \n      for (const k in oNode.attrs) {\n        if (!(k in nNode.attrs)) {\n          patches['attribs'].push(()=>{\n            oNode.elem.removeAttribute(k);\n            delete oNode.attrs[k];\n          })\n        }\n      }\n  };\n  \n  const diffKids = (oNode, nNode, patches) => {\n    let xLen = Object.keys(oNode.children).length;\n    let yLen = Object.keys(nNode.children).length;\n  \n    let len = xLen > yLen ? xLen : yLen\n  \n    for ( let i = 0; i < len; i++) {\n      if(oNode.children[i] === undefined){\n        patches['kids'].push(() =>{\n          let $el = renderElement(nNode.children[i])\n          nNode.children[i]['elem'] = $el\n          oNode.children[i] = {}\n          Object.assign(oNode.children[i], nNode.children[i])\n          oNode.elem.appendChild($el)\n        })\n      } else if(nNode.children[i] === undefined){\n        patches['kids'].push(() =>{\n        oNode.elem.removeChild(oNode.children[i].elem)\n        delete oNode.children[i]\n        })\n      } else {\n        diff(oNode, i, oNode.children[i], nNode.children[i], patches)\n      } \n    }\n  \n  };\n  \n  const diff = (parent, index, vOldNode, vNewNode, patches) => {\n    try {\n      if (vOldNode !== null && vNewNode === undefined) {\n        \n      } else if (typeof vOldNode === \"string\" || typeof vNewNode === \"string\") {\n        if (vOldNode !== vNewNode) {\n         patches['nodes'].push(()=>{\n          let $text = renderElement(vNewNode)\n          parent.elem.childNodes[index].replaceWith($text)\n         })\n        }\n        return\n      } else if (vOldNode.tag !== vNewNode.tag) {\n        patches['nodes'].push(()=>{\n          let $parent = vOldNode.elem.parentNode;\n          const $newNode = renderElement(vNewNode);\n          $parent.replaceChild($newNode, vOldNode.elem);\n          Object.assign(vOldNode, vNewNode);\n          vOldNode.elem = $newNode;\n        })\n      }\n  \n      diffAttribs(vOldNode, vNewNode, patches);\n      diffKids(vOldNode, vNewNode, patches);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  \n  const diffAndPatch = (vOldNode, vNewNode) => {\n    let patches = {nodes: [], kids: [], attribs: []}\n    diff({}, 0, vOldNode, vNewNode, patches)\n    patches['nodes'].forEach((patch) =>{ patch() })\n    patches['attribs'].forEach((patch) =>{ patch() })\n    patches['kids'].forEach((patch) =>{ patch() })\n  }\n  \n  const View = (props = {}) => {\n    var vOldDom;\n    let $viewNode;\n    var update = props.update;\n    var view = props.view;\n    var oState = props.init ? props.init[0] : null;\n    var effect = props.init\n      ? props.init.length > 1\n        ? props.init[1]\n        : null\n      : null;\n  \n    const applyState = (nState) => {\n      var vNewDom = view(nState, dispatch);\n      Object.assign(oState, nState);\n      diffAndPatch(vOldDom, vNewDom);\n    };\n  \n    const dispatch = (msg) => {\n      const nState = update(msg, oState);\n      let cmd = nState[1]\n      if(cmd){cmd(dispatch)}\n      applyState(nState[0])\n    };\n  \n    const mount = ($node) => {\n      if (effect) {\n        effect(dispatch);\n      }\n      vOldDom = oState ? view(oState, dispatch) : view();\n      $viewNode = renderElement(vOldDom);\n      if ($node.childNodes.length > 0) {\n        $node.replaceChild($viewNode, $node.childNodes[0]);\n      } else {\n        $node.appendChild($viewNode);\n      }\n    };\n  \n    return { mount };\n  };\n  \n  const App = (props = {}) => {\n    let state = props.state || null;\n    let reducer = props.reducer || null;\n    let navbar = props.navbar || null;\n    let footer = props.footer || null;\n    let main = props.main || null;\n  \n    const router = Router(main);\n  \n    const _initHeader = () => {\n      let $header = document.createElement(\"header\");\n      document.body.appendChild($header);\n      View(navbar()).mount($header);\n    };\n  \n    const _initMain = () => {\n      let $main = document.createElement(\"main\");\n      document.body.appendChild($main);\n      router.init();\n      router.onRouteChange((route) => {\n        View(route.view()).mount($main);\n      });\n    };\n   \n    const _initFooter = () => {\n      let $footer = document.createElement(\"footer\");\n      document.body.appendChild($footer);\n      View(footer()).mount($footer);\n    };\n  \n    const run = () => {\n      if (navbar) _initHeader();\n      _initMain();\n      if (footer) _initFooter();\n      router.routeTo(\"/\");\n    };\n  \n    return { run };\n  };\n  \n  export { App, View };"],"file":"index.js"}